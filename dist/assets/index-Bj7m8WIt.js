(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(t){if(t.ep)return;t.ep=!0;const a=i(t);fetch(t.href,a)}})();const c={accountActivationCost:.9,pixCost:.2,boletoLiquidationCost:1.4,pixRevenue:.2,boletoLiquidationRevenue:1.8,cardActivationCost:.91,antifraudCost:.07,floatingPercentage:.7,irpjRate:.225,cdiRate:.15},e={employees:document.getElementById("employees"),employeesValue:document.getElementById("employees-value"),tpv:document.getElementById("tpv"),tpvValue:document.getElementById("tpv-value"),adoption:document.getElementById("adoption"),adoptionValue:document.getElementById("adoption-value"),margin:document.getElementById("margin"),marginValue:document.getElementById("margin-value"),services:document.getElementById("services"),servicesValue:document.getElementById("services-value"),months:document.getElementById("months"),monthsValue:document.getElementById("months-value"),annualRevenue:document.getElementById("annual-revenue"),periodRevenue:document.getElementById("period-revenue"),activeAccounts:document.getElementById("active-accounts"),annualTpv:document.getElementById("annual-tpv"),periodMonths:document.getElementById("period-months"),revenueContext:document.getElementById("revenue-context"),insightsList:document.getElementById("insights-list")};let y=null;const d=o=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(o),h=o=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(Math.round(o));function T(){e.employeesValue.textContent=h(e.employees.value),e.tpvValue.textContent=d(e.tpv.value),e.adoptionValue.textContent=e.adoption.value+"%",e.marginValue.textContent=e.margin.value.replace(".",",")+"%",e.servicesValue.textContent=e.services.value,e.monthsValue.textContent=e.months.value,e.periodMonths.textContent=e.months.value}function V(o,s,i,r,t,a){const n=Math.floor(o*(i/100)),l=Math.min(1,(a+1)/12),u=Math.floor(n*l),v=u*s,f=u*3,g=u*1,m=f*c.pixRevenue+g*c.boletoLiquidationRevenue,C=v*.3*(c.cdiRate/12)*c.floatingPercentage*(1-c.irpjRate),R=v*(r/100)*(t/5),b=Math.floor(u*.5),x=b*7,I=x*100*.014,E=u*c.accountActivationCost,L=f*c.pixCost,M=g*c.boletoLiquidationCost,A=b*c.cardActivationCost,$=x*c.antifraudCost,B=E+L+M+A+$,F=m+C+R+I-B;return{revenue:Math.max(0,F),tpv:v,accounts:u,transactionRevenue:m,floatingRevenue:C,servicesRevenue:R,cardRevenue:I,costs:B}}function w(){const o=parseInt(e.employees.value),s=parseFloat(e.tpv.value),i=parseInt(e.adoption.value),r=parseFloat(e.margin.value),t=parseInt(e.services.value),a=parseInt(e.months.value);let n=0,l=0,u=0;const v=[];for(let g=0;g<a;g++){const m=V(o,s,i,r,t,g);n+=m.revenue,l+=m.tpv,u=Math.max(u,m.accounts),v.push(m)}const f=n/a*12;return{totalRevenue:n,annualRevenue:f,totalTpv:l,maxAccounts:u,monthlyData:v}}function D(o){const s=[],{annualRevenue:i,maxAccounts:r,monthlyData:t}=o;if(i>1e5?s.push(`Seu varejista tem potencial para gerar mais de R$ ${d(i)} em receita anualizada.`):i>5e4?s.push(`Potencial estimado de R$ ${d(i)} em receita anualizada.`):s.push(`Oportunidade inicial com potencial de crescimento para R$ ${d(i)} anualizados.`),t.length>1){const a=t[0].revenue,l=(t[t.length-1].revenue-a)/a*100;l>50&&s.push(`Crescimento projetado de ${h(l)}% durante o período de análise.`)}if(r>0&&s.push(`Base de ${h(r)} contas ativas com serviços financeiros.`),o.totalTpv>0){const n=o.totalTpv/t.length*12;s.push(`Volume transacionado estimado em R$ ${d(n)} anualizados.`)}return s.push("Comece pelos colaboradores antes dos clientes. Construa produtos simples de alto uso."),s}function O(o){const s=document.getElementById("revenue-chart").getContext("2d"),i=o.map((n,l)=>`Mês ${l+1}`),r=o.map(n=>n.revenue),t=[];let a=0;r.forEach(n=>{a+=n,t.push(a)}),y&&y.destroy(),y=new Chart(s,{type:"line",data:{labels:i,datasets:[{label:"Receita Mensal",data:r,borderColor:"#0066ff",backgroundColor:"rgba(0, 102, 255, 0.1)",borderWidth:2,fill:!0,tension:.4,pointRadius:4,pointBackgroundColor:"#0066ff",pointBorderColor:"#fff",pointBorderWidth:2,yAxisID:"y"},{label:"Receita Acumulada",data:t,borderColor:"#00d4aa",backgroundColor:"transparent",borderWidth:2,fill:!1,tension:.4,pointRadius:3,pointBackgroundColor:"#00d4aa",yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,weight:"600"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{label:function(n){let l=n.dataset.label||"";return l&&(l+=": "),l+=d(n.parsed.y),l}}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Receita Mensal (R$)",font:{size:11,weight:"bold"}},ticks:{callback:function(n){return"R$ "+(n/1e3).toFixed(0)+"k"}}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Receita Acumulada (R$)",font:{size:11,weight:"bold"}},grid:{drawOnChartArea:!1},ticks:{callback:function(n){return"R$ "+(n/1e3).toFixed(0)+"k"}}}}}})}function p(){T();const o=w();e.annualRevenue.textContent=d(o.annualRevenue),e.periodRevenue.textContent=d(o.totalRevenue),e.activeAccounts.textContent=h(o.maxAccounts),e.annualTpv.textContent=d(o.totalTpv/parseInt(e.months.value)*12);const s=o.totalRevenue/parseInt(e.months.value);e.revenueContext.textContent=`Média mensal: ${d(s)}`;const i=D(o);e.insightsList.innerHTML=i.map(r=>`<li>${r}</li>`).join(""),O(o.monthlyData)}e.employees.addEventListener("input",p);e.tpv.addEventListener("input",p);e.adoption.addEventListener("input",p);e.margin.addEventListener("input",p);e.services.addEventListener("input",p);e.months.addEventListener("input",p);document.addEventListener("DOMContentLoaded",()=>{p()});
